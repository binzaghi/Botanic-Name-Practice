<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botanical Name Practice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .question {
            margin: 20px 0;
            font-size: 22px;
            font-weight: bold;
        }
        .options {
            margin: 10px 0;
        }
        .result {
            margin-top: 20px;
            font-size: 16px;
            font-weight: bold;
        }
        button {
            font-size: 18px;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border: 2px solid #228B22;
            border-radius: 5px;
            background-color: #32CD32;
            color: white;
        }
        button:hover {
            background-color: #228B22;
        }
        #next-btn {
            display: none;
        }
        #question {
            font-size: 22px;
            font-weight: bold;
        }
        #answer {
            font-size: 18px;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
            border: 2px solid #228B22;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1 style="font-size: 28px; color: #228B22;">Master Botanical Names - Provided by Han</h1>
    <p style="font-size: 22px; margin-top: 20px;">Select Group(s):</p>
    <div id="group-selection">
        <label><input type="checkbox" value="Group 1"> Group 1</label>
        <label><input type="checkbox" value="Group 2"> Group 2</label>
        <label><input type="checkbox" value="Group 3"> Group 3</label>
        <label><input type="checkbox" value="Group 4"> Group 4</label>
        <label><input type="checkbox" value="Group 5"> Group 5</label>
        <label><input type="checkbox" value="Group 6"> Group 6</label>
        <label><input type="checkbox" value="Group 7"> Group 7</label>
    </div>
    <button onclick="confirmGroups()" style="margin-top: 10px;">Confirm Groups</button>
    <div id="mode-selection" style="display: none; margin-top: 20px;">
        <p style="font-size: 22px;">Choose your mode:</p>
        <button onclick="startTypingPractice()">Typing Mode</button>
        <button onclick="startMultipleChoice()">Multiple Choice Mode</button>
    </div>
    <div id="practice-area" style="display: none;">
        <p id="question" class="question"></p>
        <div id="options" class="options"></div>
        <input type="text" id="answer" style="display: none;" placeholder="Type your answer here">
        <button id="submit-btn" style="display: none;" onclick="checkTypingAnswer()">Submit</button>
        <p id="result" class="result"></p>
        <button id="next-btn" onclick="nextQuestion()">Next</button>
    </div>
    <script>
        const treeGroups = {
            "Group 1": [
                { botanical: "Betula pendula", common: ["European White Birch"] },
                { botanical: "Betula papyrifera", common: ["Paper Birch"] },
                { botanical: "Betula alleghaniensis", common: ["Yellow Birch"] },
                { botanical: "Betula nigra", common: ["River Birch"] },
                { botanical: "Alnus glutinosa", common: ["Black Alder"] },
                { botanical: "Carpinus caroliniana", common: ["Blue Beech"] },
                { botanical: "Ostrya virginiana", common: ["Eastern Hophornbeam"] },
                { botanical: "Corylus colurna", common: ["Turkish Hazel"] }
            ],
            "Group 2": [
                { botanical: "Gleditsia triacanthos", common: ["Honey Locust"] },
                { botanical: "Gymnocladus dioicus", common: ["Kentucky Coffeetree"] },
                { botanical: "Robinia pseudoacacia", common: ["Black Locust"] },
                { botanical: "Cercis canadensis", common: ["Eastern Redbud"] },
                { botanical: "Celtis occidentalis", common: ["Hackberry"] },
                { botanical: "Ginkgo biloba", common: ["Ginkgo"] },
                { botanical: "Ailanthus altissima", common: ["Tree of Heaven"] }
            ],
            "Group 3": [
                { botanical: "Platanus occidentalis", common: ["American Sycamore"] },
                { botanical: "Platanus x acerifolia", common: ["London Plane"] },
                { botanical: "Tilia cordata", common: ["Littleleaf Linden"] },
                { botanical: "Tilia americana", common: ["American Linden"] },
                { botanical: "Liriodendron tulipifera", common: ["Tulip Tree"] },
                { botanical: "Magnolia acuminata", common: ["Cucumber Tree"] },
                { botanical: "Liquidambar styraciflua", common: ["Sweetgum"] }
            ],
            "Group 4": [
                { botanical: "Amelanchier arborea", common: ["Downy Serviceberry"] },
                { botanical: "Crataegus spp.", common: ["Hawthorn"] },
                { botanical: "Malus spp.", common: ["Apple"] },
                { botanical: "Prunus pensylvanica", common: ["Pin Cherry"] },
                { botanical: "Prunus serotina", common: ["Black Cherry"] },
                { botanical: "Prunus virginiana", common: ["Chokecherry"] },
                { botanical: "Pyrus calleryana 'Chanticleer'", common: ["Chanticleer Pear"] },
                { botanical: "Sorbus americana", common: ["American Mountain Ash"] },
                { botanical: "Sorbus aucuparia", common: ["European Mountain Ash"] }
            ],
            "Group 5": [
                { botanical: "Aralia elata", common: ["Japanese Angelica Tree"] },
                { botanical: "Rhamnus cathartica", common: ["Common Buckthorn"] },
                { botanical: "Rhus typhina", common: ["Staghorn Sumac"] },
                { botanical: "Nyssa sylvatica", common: ["Black Gum"] },
                { botanical: "Morus alba", common: ["White Mulberry"] },
                { botanical: "Morus rubra", common: ["Red Mulberry"] }
            ],
            "Group 6": [
                { botanical: "Populus alba", common: ["White Poplar"] },
                { botanical: "Populus balsamifera", common: ["Balsam Poplar"] },
                { botanical: "Populus grandidentata", common: ["Bigtooth Aspen"] },
                { botanical: "Populus tremuloides", common: ["Quaking Aspen"] },
                { botanical: "Populus nigra 'Italica'", common: ["Lombardy Poplar"] },
                { botanical: "Salix alba 'Tristis'", common: ["Golden Weeping Willow"] },
                { botanical: "Salix fragilis", common: ["Crack Willow"] },
                { botanical: "Salix nigra", common: ["Black Willow"] }
            ],
            "Group 7": [
                { botanical: "Ulmus americana", common: ["American Elm"] },
                { botanical: "Ulmus glabra", common: ["Wych Elm"] },
                { botanical: "Ulmus procera", common: ["English Elm"] },
                { botanical: "Ulmus rubra", common: ["Slippery Elm"] },
                { botanical: "Ulmus pumila", common: ["Siberian Elm"] }
            ]
        };

        let selectedMode = "";
        let selectedGroups = [];
        let questions = [];
        let currentQuestionIndex = 0;

        function confirmGroups() {
            selectedGroups = Array.from(document.querySelectorAll('#group-selection input:checked'))
                .map(input => input.value);

            if (selectedGroups.length === 0) {
                alert("Please select at least one group.");
                return;
            }

            document.getElementById("group-selection").style.display = "none";
            document.querySelector("button[onclick='confirmGroups()']").style.display = "none";
            document.getElementById("mode-selection").style.display = "block";
        }

        function startTypingPractice() {
            selectedMode = "typing";
            startPractice();
        }

        function startMultipleChoice() {
            selectedMode = "multiple-choice";
            startPractice();
        }

        function startPractice() {
            questions = selectedGroups.flatMap(group => treeGroups[group]);
            questions = questions.sort(() => Math.random() - 0.5); // Shuffle questions
            currentQuestionIndex = 0;
            document.getElementById("mode-selection").style.display = "none";
            document.getElementById("practice-area").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestionIndex];
            document.getElementById("result").textContent = "";
            document.getElementById("next-btn").style.display = "none";

            if (selectedMode === "typing") {
                document.getElementById("question").textContent = `What is the botanical name for '${question.common[0]}'?`;
                document.getElementById("answer").style.display = "block";
                document.getElementById("submit-btn").style.display = "block";
                document.getElementById("options").style.display = "none";
            } else if (selectedMode === "multiple-choice") {
                document.getElementById("question").textContent = `What is the botanical name for '${question.common[0]}'?`;
                const optionsDiv = document.getElementById("options");
                optionsDiv.innerHTML = ""; // Clear previous options
                const correctAnswer = question.botanical;
                const choices = shuffle([
                    ...getRandomChoices(question.botanical, 3),
                    correctAnswer
                ]);

                choices.forEach((choice, index) => {
                    const button = document.createElement("button");
                    button.textContent = choice;
                    button.onclick = () => checkMultipleChoiceAnswer(choice, correctAnswer);
                    optionsDiv.appendChild(button);
                });

                document.getElementById("answer").style.display = "none";
                document.getElementById("submit-btn").style.display = "none";
                optionsDiv.style.display = "block";
            }
        }

        function checkTypingAnswer() {
            const question = questions[currentQuestionIndex];
            const userAnswer = document.getElementById("answer").value.trim();
            const resultDiv = document.getElementById("result");
            if (userAnswer.toLowerCase() === question.botanical.toLowerCase()) {
                resultDiv.textContent = "Correct!";
                resultDiv.style.color = "green";
            } else {
                resultDiv.textContent = `Oops! The correct answer is '${question.botanical}'.`;
                resultDiv.style.color = "red";
            }
            document.getElementById("next-btn").style.display = "block";
        }

        function checkMultipleChoiceAnswer(choice, correctAnswer) {
            const resultDiv = document.getElementById("result");
            if (choice === correctAnswer) {
                resultDiv.textContent = "Correct!";
                resultDiv.style.color = "green";
            } else {
                resultDiv.textContent = `Oops! The correct answer is '${correctAnswer}'.`;
                resultDiv.style.color = "red";
            }
            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                alert("You have completed the practice!");
                document.getElementById("practice-area").style.display = "none";
                location.reload();
            }
        }

        function getRandomChoices(correctAnswer, numChoices) {
            const group = Object.values(treeGroups).flat();
            const otherChoices = group.filter(tree => tree.botanical !== correctAnswer);
            return otherChoices
                .sort(() => Math.random() - 0.5)
                .slice(0, numChoices)
                .map(tree => tree.botanical);
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }
    </script>
</body>
</html>
